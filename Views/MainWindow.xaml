<Window x:Class="BoardApp.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Board CRUD" Height="650" Width="980"
        WindowStartupLocation="CenterScreen">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="10"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="12"/>
                <ColumnDefinition Width="1.2*"/>
            </Grid.ColumnDefinitions>

            <!-- Left: List -->
            <Border Grid.Column="0" Padding="10" BorderThickness="1" BorderBrush="LightGray" CornerRadius="6">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="8"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <DockPanel Grid.Row="0">
                        <TextBlock FontSize="15" FontWeight="SemiBold" Text="게시글 목록"/>
                        <TextBlock DockPanel.Dock="Right"
                                   Text="{Binding Posts.Count, StringFormat=총 {0}건}"
                                   Foreground="Gray"/>
                    </DockPanel>

                    <DataGrid Grid.Row="2"
                              ItemsSource="{Binding Posts}"
                              SelectedItem="{Binding SelectedPost, Mode=TwoWay}"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              CanUserAddRows="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="70"/>
                            <DataGridTextColumn Header="제목" Binding="{Binding Title}" Width="*"/>
                            <DataGridTextColumn Header="작성자" Binding="{Binding Author}" Width="120"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Border>

            <!-- Right: Editor -->
            <Border Grid.Column="2" Padding="10" BorderThickness="1" BorderBrush="LightGray" CornerRadius="6">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <!-- 헤더 -->
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="Auto"/>
                        <!-- 제목 -->
                        <RowDefinition Height="Auto"/>
                        <!-- 작성자 -->
                        <RowDefinition Height="Auto"/>
                        <!-- 내용 라벨 -->
                        <RowDefinition Height="*"/>
                        <!-- 내용 입력 -->
                        <RowDefinition Height="12"/>
                        <RowDefinition Height="Auto"/>
                        <!-- 버튼(우측 하단) -->
                    </Grid.RowDefinitions>

                    <!-- 헤더 -->
                    <DockPanel Grid.Row="0">
                        <TextBlock FontSize="15" FontWeight="SemiBold" Text="상세" DockPanel.Dock="Left"/>
                    </DockPanel>

                    <!-- 제목 -->
                    <StackPanel Grid.Row="2">
                        <TextBlock Text="제목" Foreground="Gray"/>
                        <TextBox Height="28" VerticalContentAlignment="Center"
                     Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>

                    <!-- 작성자 -->
                    <StackPanel Grid.Row="3" Margin="0,10,0,0">
                        <TextBlock Text="작성자" Foreground="Gray"/>
                        <TextBox Height="28" VerticalContentAlignment="Center"
                     Text="{Binding Author, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>

                    <!-- 내용 라벨 -->
                    <TextBlock Grid.Row="4" Margin="0,10,0,0" Text="내용" Foreground="Gray"/>

                    <!-- 내용 입력 -->
                    <TextBox Grid.Row="5" Margin="0,6,0,0"
                            Text="{Binding Content, UpdateSourceTrigger=PropertyChanged}"
                            AcceptsReturn="True" TextWrapping="Wrap"
                            VerticalScrollBarVisibility="Auto"/>

                    <!-- 버튼: 우측 하단 -->
                    <StackPanel Grid.Row="7" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                        <!-- 등록 버튼(SelectedPost == null) -->
                        <Button Width="90" Margin="0,0,8,0" Content="등록" Command="{Binding CreateCommand}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedPost}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <!-- 수정 버튼(SelectedPost != null) -->
                        <Button Width="90" Margin="0,0,8,0" Content="수정" Command="{Binding UpdateCommand}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Visibility" Value="Visible"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedPost}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Content="삭제" Width="90" Margin="0,0,8,0" Command="{Binding DeleteCommand}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="IsEnabled" Value="True"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedPost}" Value="{x:Null}">
                                            <Setter Property="IsEnabled" Value="False"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Content="초기화" Width="90" Command="{Binding ClearCommand}"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- Bottom -->
        <StatusBar Grid.Row="2">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusMessage}" />
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
